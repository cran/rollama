<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Maximilian Weber and Johannes B. Gruber" />


<title>annotation</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">annotation</h1>
<h4 class="author">Maximilian Weber and Johannes B. Gruber</h4>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>After you installed Ollama on your machine and downloaded the package
rollama you can load the package and pull the default model
(<code>llama2</code>) by calling:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(rollama)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">pull_model</span>()</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co">#&gt; ✔ model llama2 pulled succesfully</span></span></code></pre></div>
</div>
<div id="prompting-strategies" class="section level1">
<h1>Prompting Strategies</h1>
<p>If you want to annotate textual data, you can use various prompting
strategies. For an overview of common approaches, you can read a paper
by <a href="https://arxiv.org/abs/2401.00284">Weber and Reichardt
(2023)</a>. These strategies primarily differ in whether or how many
examples are given (Zero-shot, One-shot, or Few-shot) and whether
reasoning is involved (Chain-of-Thought).</p>
<p>When writing a prompt we can give the model content for the system
part, user part and assistant part. The system message typically
includes instructions or context that guides the interaction, setting
the stage for how the user and the assistant should interact. For an
annotation task we could write: “You assign texts into categories.
Answer with just the correct category.” The table below summarizes
different prompting strategies for annotating textual data. Each
strategy varies in the number of examples given and the incorporation of
reasoning.</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Prompting Strategy</th>
<th>Example Structure</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Zero-shot</td>
<td><code>{&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;Text of System Prompt&quot;},</code><br><code>{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;(Text to classify) + classification question&quot;}</code></td>
</tr>
<tr class="even">
<td>One-shot</td>
<td><code>{&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;Text of System Prompt&quot;},</code><br><code>{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;(Example text) + classification question&quot;},</code><br><code>{&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;Example classification&quot;},</code><br><code>{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;(Text to classify) + classification question&quot;}</code></td>
</tr>
<tr class="odd">
<td>Few-shot</td>
<td><code>{&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;Text of System Prompt&quot;},</code><br><code>{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;(Example text) + classification question&quot;},</code><br><code>{&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;Example classification&quot;},</code><br><code>{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;(Example text) + classification question&quot;},</code><br><code>{&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;Example classification&quot;},</code><br><code>. . . more examples</code><br><code>{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;(Text to classify) + classification question&quot;}</code></td>
</tr>
<tr class="even">
<td>Chain-of-Thought</td>
<td><code>{&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;Text of System Prompt&quot;},</code><br><code>{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;(Text to classify) + reasoning question&quot;},</code><br><code>{&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;Reasoning&quot;},</code><br><code>{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Classification question&quot;}</code></td>
</tr>
</tbody>
</table>
<div id="zero-shot" class="section level2">
<h2>Zero-shot</h2>
<p>In this approach, no prior examples are given. The structure includes
a system prompt providing instructions and a user prompt with the text
to classify and the classification question (in this example we only
provide the categories).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  <span class="sc">~</span>role,    <span class="sc">~</span>content,</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  <span class="st">&quot;system&quot;</span>, <span class="st">&quot;You assign texts into categories. Answer with just the correct category.&quot;</span>,</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>  <span class="st">&quot;user&quot;</span>,   <span class="st">&quot;text: the pizza tastes terrible</span><span class="sc">\n</span><span class="st">categories: positive, neutral, negative&quot;</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>)</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="fu">query</span>(q)</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co">#&gt; ── Answer ────────────────────────────────────────────────────────</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co">#&gt; Category: Negative</span></span></code></pre></div>
</div>
<div id="one-shot" class="section level2">
<h2>One-shot</h2>
<p>This involves giving a single example before the actual task. The
structure includes a system prompt, followed by a user prompt with an
example text and classification question, the assistant’s example
classification, and then another user prompt with the new text to
classify.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="sc">~</span>role,    <span class="sc">~</span>content,</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>  <span class="st">&quot;system&quot;</span>, <span class="st">&quot;You assign texts into categories. Answer with just the correct category.&quot;</span>,</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>  <span class="st">&quot;user&quot;</span>, <span class="st">&quot;text: the pizza tastes terrible</span><span class="sc">\n</span><span class="st">categories: positive, neutral, negative&quot;</span>,</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>  <span class="st">&quot;assistant&quot;</span>, <span class="st">&quot;Category: Negative&quot;</span>,</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>  <span class="st">&quot;user&quot;</span>, <span class="st">&quot;text: the service is great</span><span class="sc">\n</span><span class="st">categories: positive, neutral, negative&quot;</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>)</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="fu">query</span>(q)</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co">#&gt; ── Answer ────────────────────────────────────────────────────────</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="co">#&gt; Category: Positive</span></span></code></pre></div>
<p>A nice side effect of the one-shot strategy (and all
n&gt;0-strategies) is that you can tune the format the model uses in its
replies. For example, if you want to have an output that is easy to
parse, you could change the assistant message to
<code>&quot;{&#39;Category&#39;:&#39;Negative&#39;,&#39;Confidence&#39;:&#39;100%&#39;,&#39;Important&#39;:&#39;terrible&#39;}&quot;</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="sc">~</span>role,    <span class="sc">~</span>content,</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="st">&quot;system&quot;</span>, <span class="st">&quot;You assign texts into categories. Answer with just the correct category.&quot;</span>,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="st">&quot;user&quot;</span>, <span class="st">&quot;text: the pizza tastes terrible</span><span class="sc">\n</span><span class="st">categories: positive, neutral, negative&quot;</span>,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>  <span class="st">&quot;assistant&quot;</span>, <span class="st">&quot;{&#39;Category&#39;:&#39;Negative&#39;,&#39;Confidence&#39;:&#39;100%&#39;,&#39;Important&#39;:&#39;terrible&#39;}&quot;</span>,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>  <span class="st">&quot;user&quot;</span>, <span class="st">&quot;text: the service is great</span><span class="sc">\n</span><span class="st">categories: positive, neutral, negative&quot;</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>)</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>answer <span class="ot">&lt;-</span> <span class="fu">query</span>(q)</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="co">#&gt; ── Answer ────────────────────────────────────────────────────────</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt; {&#39;Category&#39;:&#39;Positive&#39;,&#39;Confidence&#39;:&#39;100%&#39;,&#39;Important&#39;:&#39;great&#39;}</span></span></code></pre></div>
<p>This is a valid JSON return and can be parsed into a list with, e.g.,
<code>jsonlite::fromJSON()</code>. By using
<code>pluck(answer, &quot;message&quot;, &quot;content&quot;)</code>, you can directly
extract the result and don’t need to copy it from screen.</p>
</div>
<div id="few-shot" class="section level2">
<h2>Few-shot</h2>
<p>This strategy includes multiple examples (more than one). The
structure is similar to one-shot but with several iterations of user and
assistant messages providing examples before the final text to
classify.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="sc">~</span>role,    <span class="sc">~</span>content,</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="st">&quot;system&quot;</span>, <span class="st">&quot;You assign texts into categories. Answer with just the correct category.&quot;</span>,</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="st">&quot;user&quot;</span>, <span class="st">&quot;text: the pizza tastes terrible</span><span class="sc">\n</span><span class="st">categories: positive, neutral, negative&quot;</span>,</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  <span class="st">&quot;assistant&quot;</span>, <span class="st">&quot;Category: Negative&quot;</span>,</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>  <span class="st">&quot;user&quot;</span>, <span class="st">&quot;text: the service is great</span><span class="sc">\n</span><span class="st">categories: positive, neutral, negative&quot;</span>,</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>  <span class="st">&quot;assistant&quot;</span>, <span class="st">&quot;Category: Positive&quot;</span>,</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>  <span class="st">&quot;user&quot;</span>, <span class="st">&quot;text: I once came here with my wife</span><span class="sc">\n</span><span class="st">categories: positive, neutral, negative&quot;</span>,</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>  <span class="st">&quot;assistant&quot;</span>, <span class="st">&quot;Category: Neutral&quot;</span>,</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>  <span class="st">&quot;user&quot;</span>, <span class="st">&quot;text: I once ate pizza</span><span class="sc">\n</span><span class="st">categories: positive, neutral, negative&quot;</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>)</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="fu">query</span>(q)</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co">#&gt; ── Answer ────────────────────────────────────────────────────────</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="co">#&gt; Category: Neutral</span></span></code></pre></div>
</div>
<div id="chain-of-thought" class="section level2">
<h2>Chain-of-Thought</h2>
<p>This approach involves at least one reasoning step. The structure
here starts with the system prompt, then a user prompt with a text to
classify and a reasoning question.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>q_thought <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="sc">~</span>role,    <span class="sc">~</span>content,</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="st">&quot;system&quot;</span>, <span class="st">&quot;You assign texts into categories. &quot;</span>,</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>  <span class="st">&quot;user&quot;</span>,   <span class="st">&quot;text: the pizza tastes terrible</span><span class="sc">\n</span><span class="st">What sentiment (positive, neutral, or negative) would you assign? Provide some thoughts.&quot;</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>)</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>output_thought <span class="ot">&lt;-</span> <span class="fu">query</span>(q_thought)</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">#&gt; ── Answer ────────────────────────────────────────────────────────</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co">#&gt; Based on the text &quot;the pizza tastes terrible,&quot; I would assign a sentiment of negative. Here&#39;s why:</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="co">#&gt; * The use of the word &quot;tastes&quot; implies that the speaker has a strong opinion about the taste of the pizza, which is typically associated with negative</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="co">#&gt; emotions.</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="co">#&gt; * The phrase &quot;terrible&quot; is a strong adjective that conveys a sense of disappointment or displeasure.</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="co">#&gt; * The sentiment is further reinforced by the fact that the speaker used the word &quot;tastes,&quot; which implies a personal evaluation or judgment about the pizza&#39;s</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="co">#&gt; taste, rather than a neutral description.</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="co">#&gt; Overall, based on the language and structure of the sentence, it seems clear that the speaker has a negative sentiment towards the pizza.</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="fu">pluck</span>(output_thought, <span class="st">&quot;message&quot;</span>, <span class="st">&quot;content&quot;</span>)</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="co">#&gt; [1] &quot;\nBased on the text \&quot;the pizza tastes terrible,\&quot; I would assign a sentiment of negative. Here&#39;s why:\n\n* The use of the word \&quot;tastes\&quot; implies that the speaker has a strong opinion about the taste of the pizza, which is typically associated with negative emotions.\n* The phrase \&quot;terrible\&quot; is a strong adjective that conveys a sense of disappointment or displeasure.\n* The sentiment is further reinforced by the fact that the speaker used the word \&quot;tastes,\&quot; which implies a personal evaluation or judgment about the pizza&#39;s taste, rather than a neutral description.\n\nOverall, based on the language and structure of the sentence, it seems clear that the speaker has a negative sentiment towards the pizza.&quot;</span></span></code></pre></div>
<p>In the next step we can use the assistant’s reasoning and a user
prompt with the classification question.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="sc">~</span>role,    <span class="sc">~</span>content,</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="st">&quot;system&quot;</span>, <span class="st">&quot;You assign texts into categories. &quot;</span>,</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>  <span class="st">&quot;user&quot;</span>,   <span class="st">&quot;text: the pizza tastes terrible</span><span class="sc">\n</span><span class="st">What sentiment (positive, neutral, or negative) would you assign? Provide some thoughts.&quot;</span>,</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  <span class="st">&quot;assistant&quot;</span>, output_thought<span class="sc">$</span>message<span class="sc">$</span>content,</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  <span class="st">&quot;user&quot;</span>,   <span class="st">&quot;Now answer with just the correct category (positive, neutral, or negative)&quot;</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>)</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="fu">query</span>(q)</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co">#&gt; ── Answer ────────────────────────────────────────────────────────</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="co">#&gt; Negative</span></span></code></pre></div>
</div>
</div>
<div id="batch-annotation" class="section level1">
<h1>Batch annotation</h1>
<p>In practice, you probably never want to annotate just one text. In
this section, we show you how you can wrap <code>rollama::query()</code>
into another function to ask the model to annotate a batch of texts. We
might add this function to the package in the future, but at the moment,
we want to keep it simple.</p>
<div id="function-to-create-a-query" class="section level2">
<h2>Function to create a query</h2>
<p>The <code>create_query</code> function is designed to facilitate the
creation of a structured query for text classification.</p>
<p>Components:</p>
<ul>
<li><strong>System Message</strong>: Provides context or instructions
for the classification task.</li>
<li><strong>Examples</strong>: Prior examples consisting of user
messages and assistant responses (for one-shot and few-shot
learning).</li>
<li><strong>Text to Classify</strong>: The new text to be
categorized.</li>
<li><strong>Classification Question</strong>: Lists the possible
categories for classification.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>create_query <span class="ot">&lt;-</span> <span class="cf">function</span>(systemmsg, examples, texttoclassify, classification_question) {</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="co"># Start with the system message</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  q <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>    <span class="sc">~</span>role,    <span class="sc">~</span>content,</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>    <span class="st">&quot;system&quot;</span>, systemmsg</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  )</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>  <span class="co"># Add examples (if any), appending the classification question to the user messages</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>  <span class="cf">for</span>(example <span class="cf">in</span> examples) {</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>    usermsg_with_question <span class="ot">&lt;-</span> <span class="fu">paste</span>(example<span class="sc">$</span>usermsg, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, classification_question)</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>    q <span class="ot">&lt;-</span> <span class="fu">add_row</span>(q, <span class="at">role =</span> <span class="st">&quot;user&quot;</span>, <span class="at">content =</span> usermsg_with_question)</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>    q <span class="ot">&lt;-</span> <span class="fu">add_row</span>(q, <span class="at">role =</span> <span class="st">&quot;assistant&quot;</span>, <span class="at">content =</span> example<span class="sc">$</span>assistantmsg)</span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>  }</span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>  <span class="co"># Add the current text to classify along with the classification question</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a>  usermsg_final <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;text:&quot;</span>, texttoclassify, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, classification_question)</span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a>  q <span class="ot">&lt;-</span> <span class="fu">add_row</span>(q, <span class="at">role =</span> <span class="st">&quot;user&quot;</span>, <span class="at">content =</span> usermsg_final)</span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a>  <span class="fu">return</span>(q)</span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="example-usage" class="section level2">
<h2>Example usage</h2>
<div id="zero-shot-example" class="section level3">
<h3>Zero-shot example</h3>
<p>In this example, the function is used without any examples.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>systemmsg <span class="ot">&lt;-</span> <span class="st">&quot;You assign texts into categories. Answer with just the correct category.&quot;</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>q_zs <span class="ot">&lt;-</span> <span class="fu">create_query</span>(systemmsg, <span class="at">examples =</span> <span class="fu">list</span>(), <span class="st">&quot;the pizza tastes terrible&quot;</span>, <span class="st">&quot;Categories: positive, neutral, negative&quot;</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="fu">query</span>(q_zs)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="co">#&gt; ── Answer ────────────────────────────────────────────────────────</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="co">#&gt; Category: Negative</span></span></code></pre></div>
</div>
<div id="one-shot-example-with-one-example" class="section level3">
<h3>One-shot example with one example</h3>
<p>Here, one prior example is provided to aid the classification:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>examples_os <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>    <span class="at">usermsg =</span> <span class="st">&quot;text: the pizza tastes terrible&quot;</span>,</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>    <span class="at">assistantmsg =</span> <span class="st">&quot;Category: Negative&quot;</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  )</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>)</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>q_os <span class="ot">&lt;-</span> <span class="fu">create_query</span>(systemmsg, examples_os, <span class="st">&quot;the service is great&quot;</span>, <span class="st">&quot;Categories: positive, neutral, negative&quot;</span>)</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="fu">query</span>(q_os)</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co">#&gt; ── Answer ────────────────────────────────────────────────────────</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="co">#&gt; Category: Positive</span></span></code></pre></div>
</div>
<div id="few-shot-example-with-multiple-examples" class="section level3">
<h3>Few-shot example with multiple examples</h3>
<p>This scenario uses multiple examples to enrich the context for the
new classification:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>examples_fs <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>    <span class="at">usermsg =</span> <span class="st">&quot;text: the pizza tastes terrible&quot;</span>,</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>    <span class="at">assistantmsg =</span> <span class="st">&quot;Category: Negative&quot;</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>  ),</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>    <span class="at">usermsg =</span> <span class="st">&quot;text: the service is great&quot;</span>,</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>    <span class="at">assistantmsg =</span> <span class="st">&quot;Category: Positive&quot;</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>  ),</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>    <span class="at">usermsg =</span> <span class="st">&quot;text: I once came here with my wife&quot;</span>,</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>    <span class="at">assistantmsg =</span> <span class="st">&quot;Category: Neutral&quot;</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a>  )</span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a>)</span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a>q_fs <span class="ot">&lt;-</span> <span class="fu">create_query</span>(systemmsg, examples_fs, <span class="st">&quot;I once ate pizza&quot;</span>, <span class="st">&quot;Categories: positive, neutral, negative&quot;</span>)</span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="fu">query</span>(q_fs)</span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a><span class="co">#&gt; ── Answer ────────────────────────────────────────────────────────</span></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a><span class="co">#&gt; Category: Positive</span></span></code></pre></div>
</div>
</div>
</div>
<div id="another-example-using-a-dataframe" class="section level1">
<h1>Another example using a dataframe</h1>
<p>This example demonstrates how to perform sentiment analysis on a set
of movie reviews. The process involves creating a dataframe of reviews,
processing each review to classify its sentiment, and appending the
results as a new column in the dataframe.</p>
<p>We create a dataframe named <code>movie_reviews</code> with two
columns:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># Create an example dataframe with 5 movie reviews</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>movie_reviews <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  <span class="at">review_id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>  <span class="at">review =</span> <span class="fu">c</span>(<span class="st">&quot;A stunning visual spectacle with a gripping storyline.&quot;</span>,</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>             <span class="st">&quot;The plot was predictable, but the acting was superb.&quot;</span>,</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>             <span class="st">&quot;An overrated film with underwhelming performances.&quot;</span>,</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>             <span class="st">&quot;A beautiful tale of love and adventure, beautifully shot.&quot;</span>,</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>             <span class="st">&quot;The movie lacked depth, but the special effects were incredible.&quot;</span>)</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>)</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co"># Print the initial dataframe</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>movie_reviews</span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="co">#&gt;   review_id review                                                </span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="co">#&gt;       &lt;int&gt; &lt;chr&gt;                                                 </span></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a><span class="co">#&gt; 1         1 A stunning visual spectacle with a gripping storyline.</span></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="co">#&gt; 2         2 The plot was predictable, but the acting was superb.  </span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="co">#&gt; 3         3 An overrated film with underwhelming performances.    </span></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a><span class="co">#&gt; 4         4 A beautiful tale of love and adventure, beautifully s…</span></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a><span class="co">#&gt; 5         5 The movie lacked depth, but the special effects were …</span></span></code></pre></div>
<p>We define a system message and a classification question to guide the
sentiment analysis:</p>
<p>The function <code>process_reviews</code></p>
<ul>
<li>Iterates through each review.</li>
<li>Constructs a query using <code>create_query</code>.</li>
<li>Obtains sentiment classification (by <code>query(q)</code>
function).</li>
<li>Stores the result in the <code>annotations</code> vector.</li>
<li>Appends <code>annotations</code> as a new column in the
dataframe.</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>systemmsg <span class="ot">&lt;-</span> <span class="st">&quot;Classify the sentiment of the movie review. Answer with just the correct category.&quot;</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>classification_question <span class="ot">&lt;-</span> <span class="st">&quot;Categories: positive, neutral, negative&quot;</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co"># Function to process each review and append the result to a new column</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>process_reviews <span class="ot">&lt;-</span> <span class="cf">function</span>(reviews) {</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>  annotations <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;character&quot;</span>, <span class="at">length =</span> <span class="fu">nrow</span>(reviews))</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(reviews<span class="sc">$</span>review)) {</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>    q <span class="ot">&lt;-</span> <span class="fu">create_query</span>(systemmsg, <span class="at">examples =</span> <span class="fu">list</span>(), reviews<span class="sc">$</span>review[i], classification_question)</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>    output <span class="ot">&lt;-</span> <span class="fu">query</span>(q, <span class="at">screen =</span> <span class="cn">FALSE</span>)</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>    annotations[i] <span class="ot">&lt;-</span> <span class="fu">pluck</span>(output, <span class="st">&quot;message&quot;</span>, <span class="st">&quot;content&quot;</span>)</span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>  }</span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>  reviews<span class="sc">$</span>annotation <span class="ot">&lt;-</span> annotations</span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>  <span class="fu">return</span>(reviews)</span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>}</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a><span class="co"># Process and annotate the movie reviews</span></span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a>annotated_reviews <span class="ot">&lt;-</span> <span class="fu">process_reviews</span>(movie_reviews)</span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a></span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a><span class="co"># Print the annotated dataframe</span></span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a>annotated_reviews</span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 3</span></span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a><span class="co">#&gt;   review_id review                                      annotation</span></span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a><span class="co">#&gt;       &lt;int&gt; &lt;chr&gt;                                       &lt;chr&gt;     </span></span>
<span id="cb13-25"><a href="#cb13-25" tabindex="-1"></a><span class="co">#&gt; 1         1 A stunning visual spectacle with a grippin… &quot;\nPositi…</span></span>
<span id="cb13-26"><a href="#cb13-26" tabindex="-1"></a><span class="co">#&gt; 2         2 The plot was predictable, but the acting w… &quot;Positive&quot;</span></span>
<span id="cb13-27"><a href="#cb13-27" tabindex="-1"></a><span class="co">#&gt; 3         3 An overrated film with underwhelming perfo… &quot;Negative&quot;</span></span>
<span id="cb13-28"><a href="#cb13-28" tabindex="-1"></a><span class="co">#&gt; 4         4 A beautiful tale of love and adventure, be… &quot;Positive&quot;</span></span>
<span id="cb13-29"><a href="#cb13-29" tabindex="-1"></a><span class="co">#&gt; 5         5 The movie lacked depth, but the special ef… &quot;Negative&quot;</span></span></code></pre></div>
<p>This takes a little longer than classic supervised machine learning
or even classification with transformer models. However, the advantage
is that instructions can be provided using plain English, the models
need very few examples to perform surprisingly well, and the best
models, like <code>mixtral</code>, can often deal more complex
categories than other approaches.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
